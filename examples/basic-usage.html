<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å‰ç«¯æ—¥å¿—SDK - åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }
      .button {
        background: #007cba;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
      }
      .button:hover {
        background: #005a87;
      }
      .error-button {
        background: #dc3545;
      }
      .error-button:hover {
        background: #c82333;
      }
      .log-output {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 15px;
        margin-top: 20px;
        font-family: monospace;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h1>å‰ç«¯æ—¥å¿—SDK - åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹</h1>

    <h2>åŠŸèƒ½æ¼”ç¤º</h2>
    <div>
      <button class="button" onclick="testLog()">è®°å½•ä¿¡æ¯æ—¥å¿—</button>
      <button class="button" onclick="testWarn()">è®°å½•è­¦å‘Šæ—¥å¿—</button>
      <button class="button error-button" onclick="testError()">
        è§¦å‘é”™è¯¯
      </button>
      <button class="button" onclick="testTrack()">è·Ÿè¸ªäº‹ä»¶</button>
      <button class="button" onclick="testUser()">è®¾ç½®ç”¨æˆ·ä¿¡æ¯</button>
      <button class="button" onclick="testPerformance()">æ¨¡æ‹Ÿæ€§èƒ½é—®é¢˜</button>
    </div>

    <div id="output" class="log-output">æ§åˆ¶å°è¾“å‡ºå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>

    <!-- ä½¿ç”¨UMDç‰ˆæœ¬ -->
    <script src="../dist/umd/frontend-logger-sdk.min.js"></script>
    <script>
      // åˆå§‹åŒ–SDK
      FrontendLoggerSDK.init({
        reportUrl: "https://your-logging-endpoint.com/api/logs",
        appId: "demo-app",
        debug: true,
        sampleRate: 1.0,
        autoTrack: {
          jsError: true,
          resourceError: true,
          promiseRejection: true,
          performance: true,
          webVitals: true,
          navigationTiming: true,
          deviceInfo: true,
        },
        behavior: {
          clicks: true,
          navigation: true,
        },
        maxBreadcrumbs: 30,
      });

      // é‡å†™console.logä»¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
      const output = document.getElementById("output");
      const originalLog = console.log;
      console.log = function (...args) {
        originalLog.apply(console, args);
        output.textContent += args.join(" ") + "\n";
        output.scrollTop = output.scrollHeight;
      };

      // æµ‹è¯•å‡½æ•°
      function testLog() {
        FrontendLoggerSDK.log("ç”¨æˆ·ç‚¹å‡»äº†ä¿¡æ¯æŒ‰é’®", {
          timestamp: new Date().toISOString(),
          userAgent: navigator.userAgent,
        });
        console.log("âœ… ä¿¡æ¯æ—¥å¿—å·²å‘é€");
      }

      function testWarn() {
        FrontendLoggerSDK.warn("è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯", {
          component: "demo-page",
          action: "warn-button-click",
        });
        console.log("âš ï¸ è­¦å‘Šæ—¥å¿—å·²å‘é€");
      }

      function testError() {
        try {
          // æ•…æ„è§¦å‘é”™è¯¯
          throw new Error("è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé”™è¯¯");
        } catch (e) {
          FrontendLoggerSDK.error(e, {
            context: "demo-error-button",
            userId: "demo-user-123",
          });
          console.log("âŒ é”™è¯¯æ—¥å¿—å·²å‘é€");
        }
      }

      function testTrack() {
        FrontendLoggerSDK.track("button_click", {
          buttonType: "track-demo",
          page: "demo-page",
          timestamp: Date.now(),
        });
        console.log("ğŸ“Š äº‹ä»¶è·Ÿè¸ªå·²å‘é€");
      }

      function testUser() {
        FrontendLoggerSDK.setUser("demo-user-123", {
          name: "æ¼”ç¤ºç”¨æˆ·",
          email: "demo@example.com",
          role: "tester",
        });
        console.log("ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯å·²è®¾ç½®");
      }

      function testPerformance() {
        // æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶æ“ä½œ
        const start = performance.now();
        let result = 0;
        for (let i = 0; i < 1000000; i++) {
          result += Math.random();
        }
        const duration = performance.now() - start;

        FrontendLoggerSDK.track("performance_test", {
          operation: "heavy_calculation",
          duration: duration,
          result: result,
        });
        console.log(`âš¡ æ€§èƒ½æµ‹è¯•å®Œæˆï¼Œè€—æ—¶: ${duration.toFixed(2)}ms`);
      }

      // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–æ—¥å¿—
      window.addEventListener("load", function () {
        console.log("ğŸš€ å‰ç«¯æ—¥å¿—SDKæ¼”ç¤ºé¡µé¢å·²åŠ è½½");
        FrontendLoggerSDK.track("page_loaded", {
          page: "demo",
          loadTime: performance.now(),
        });
      });
    </script>
  </body>
</html>
